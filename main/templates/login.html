{%extends "layout_thebestof.html"%}

{%block content%}

<body>
    
    <h1> The Best of Playlists: Artists, Genres, Mood</h1>
    
    <h3> The best DJ is everyone! Make playlists for all occasions with ease!</h3>
    <p>  Find popular tracks from popular playlists. </p>
    <p> To get started, log into Spotify. Don't worry, Spotify keeps your account information safe!</p>
    
    
    <form action="/auth" >
        <input type="submit" id="submit" value="LOGIN WITH SPOTIFY"/>
    </form>

    <h2>   Playlists Created: <span display = "inline" id="counter">{{playlists_created}}</span>
        <br>

        Total Songs: <span display = "inline" id="counter2">{{songs_added}}</span>
    </h2>

</body>

<script>

    function animateValue(obj, start, end, duration) {
  let startTimestamp = null;
  const step = (timestamp) => {
    if (!startTimestamp) startTimestamp = timestamp;
    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
    obj.innerHTML = Math.floor(progress * (end - start) + start);
    if (progress < 1) {
      window.requestAnimationFrame(step);
    }
  };
  window.requestAnimationFrame(step);
}
const obj = document.getElementById("counter");
animateValue(obj, 0,{{playlists_created}}, 5000)

const obj2 = document.getElementById("counter2");
animateValue(obj2, 0,{{songs_added}}, 7500)

</script>



{%endblock%}

